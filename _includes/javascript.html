<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<!--
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
-->


{% if page.title == "University" %}
<script>

/*
 * Step 1: build our data structure out from collections/_logs/*.md so JS can access.
 */
var university = [];
{% assign logs = site.logs | sort: "id" %}
{% for log in logs %}
  var o_{{ log.content_id }} = {};
  o_{{ log.content_id }}["content_id"] = {{ log.content_id }};
  o_{{ log.content_id }}["author"] = "{{ log.author }}";
  o_{{ log.content_id }}["ascii"] = "{{ log.ascii }}";
  o_{{ log.content_id }}["x"] = {{ log.x }};
  o_{{ log.content_id }}["y"] = {{ log.y }};
  o_{{ log.content_id }}["class"] = "{{ log.class }}";
  var a = [];
  {% for attribute in log.attributes %}
    a.push("{{ attribute }}");
  {% endfor %}
  university.push(o_{{ log.content_id }});
{% endfor %}

console.log(university);

/*
 * Step 2: make the map.
 */
function makeGrid(x, y) {
  var out = '';
  for (var iy = y - 1; iy >= 0; iy--) {
    var cells = '';
    for (var ix = x - 1; ix >= 0; ix--) {
      var className = 'x' + ix + 'y' + iy;
      cells += makeCell(className);
    }
    out += makeRow(cells);
  }
  return out;
}

function makeRow(cells) {
  return '<div class="longitude">' + cells + '</div>';
}

function makeCell(className) {
  return '<div class="cell ' + className + '">.</div>';
}

if (document.getElementById('university')) {
  document.getElementById('university').innerHTML = makeGrid(32, 16);
}

/*
 * Step 3: profit.
 */

// loop through univeristy
// get x and y
// inject ascii character
// inject css class
// simulate clicks $("[data-content-id='" + content_id + "']").click();


/*
 * Left content area. Sorry for the jQuery. ¯\_(ツ)_/¯
 */
$(function() {
  $('a.log-nav').click(function() {
    var content_id = $(this).data("content-id")
    $('a.log-nav').each(function() { $(this).removeClass("active"); });
    $(this).addClass("active");
    $('.log-content').each(function() { $(this).hide() });
    $('.log-' + content_id).show();
  });

  // Set the initial log view based on the anchor in the URL.
  var hash = window.location.hash.substr(1) == "" ? 1 : window.location.hash.substr(1);
  $("[data-content-id='" + hash + "']").click();

  /*
   * Make all post images link to high res versions of themsleves.
   * The other options besides JS were to do it in markdown which is an awful author/writing
   * experience or extend Jekyll to do this during compilation. This is 3 lines.
   */
  $('.log-content img').each(function() {
    $(this).wrap('<a href="' + this.src + '"></a>');
  });

});

</script>
{% endif %}

<!-- this was intended for for global js, but do whatever you need to -->
<script src="{{ "/assets/javascript/script.js" | relative_url }}?{{site.time | date: '%s%N'}}"></script>